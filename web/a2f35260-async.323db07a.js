(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["a2f35260"],{"7f0dc404":function(e,a,t){"use strict";t.d(a,"__esModule",{value:!0}),t.d(a,"default",{enumerable:!0,get:function(){return g;}});var s=t("777fffbe"),l=t("26e051b7"),i=t("e54bf6aa"),u=t("985b35bf"),n=t("ae74910a"),r=s._(t("8c11512a")),d=t("76b52bba"),o=t("a8e90e34");function f({title:e,value:a,icon:t}){return(0,l.jsx)(u.ProCard,{style:{flex:"1 1 calc(25% - 12px)",minWidth:"250px"},title:e,boxShadow:!0,children:a});}var g=()=>{let{token:e}=r.default.useToken(),{initialState:a}=(0,n.useModel)("@@initialState"),t=(0,n.useIntl)(),[s,u]=(0,d.useState)(null),[g,c]=(0,d.useState)(!0),[m,h]=(0,d.useState)(null);(0,d.useEffect)(()=>{c(!0),o.API.get("/api/user/summary").then(e=>{if(e.data&&"ok"===e.data.status)u(e.data.data),h(null);else{var a;h((null===(a=e.data)||void 0===a?void 0:a.message)||t.formatMessage({id:"pages.admin.dashboard.fetchError",defaultMessage:"\u83B7\u53D6\u6570\u636E\u5931\u8D25"}));}}).catch(e=>{h(t.formatMessage({id:"pages.admin.dashboard.networkError",defaultMessage:"\u7F51\u7EDC\u9519\u8BEF"}));}).finally(()=>c(!1));},[t]);let b=[{title:t.formatMessage({id:"pages.admin.dashboard.userCount",defaultMessage:"\u7528\u6237\u6570\u91CF"}),value:(null==s?void 0:s.totle_users)??"-",icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.deviceCount",defaultMessage:"\u8BBE\u5907\u6570\u91CF"}),value:(null==s?void 0:s.totle_devices)??"-",icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.agentCount",defaultMessage:"\u667A\u80FD\u4F53\u6570\u91CF"}),value:(null==s?void 0:s.totle_agents)??"-",icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.onlineUsers",defaultMessage:"\u5728\u7EBF\u7528\u6237\u6570"}),value:(null==s?void 0:s.online_users)??"-",icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.sessionDevices",defaultMessage:"\u5BF9\u8BDD\u7528\u6237\u6570"}),value:(null==s?void 0:s.session_devices)??"-",icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.memoryUsage",defaultMessage:"\u5185\u5B58\u4F7F\u7528\u7387"}),value:(e=>{if(null==e||"-"===e)return"-";let a=Number(e);return isNaN(a)?"-":`${Number(a.toFixed(2))}%`;})(null==s?void 0:s.system_memory_use),icon:null},{title:t.formatMessage({id:"pages.admin.dashboard.cpuUsage",defaultMessage:"CPU\u4F7F\u7528\u7387"}),value:(e=>{if(null==e||"-"===e)return"-";let a=Number(e);return isNaN(a)?"-":`${Number(a.toFixed(2))}%`;})(null==s?void 0:s.system_cpu_use),icon:null}];return(0,l.jsx)(i.PageContainer,{children:(0,l.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:16},children:b.map((e,a)=>(0,l.jsx)(f,{title:e.title,value:e.value},e.title))})});};},a8e90e34:function(e,a,t){"use strict";t.d(a,"__esModule",{value:!0}),t.d(a,"API",{enumerable:!0,get:function(){return n;}});var s=t("777fffbe")._(t("795f1363")),l=t("1fc97d93"),i=t("9a7ec01c"),u=t("23f8e02c");let n=s.default.create({baseURL:i.ENV.API_BASE_URL});n.interceptors.request.use(e=>{let a=(0,u.authHeader)();return e.headers&&"function"==typeof e.headers.set?a.Authorization&&e.headers.set("Authorization",a.Authorization):e.headers&&a.Authorization&&(e.headers.Authorization=a.Authorization),e;},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>((0,l.showError)(e),Promise.reject(e)));}}]);
//# sourceMappingURL=a2f35260-async.323db07a.js.map