(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["f56e5e2e"],{"8cb33daa":function(e,s,a){a.d(s,"__esModule",{value:!0}),a.e(s,{default:function(){return H;}});var r=a("777fffbe"),t=a("852bbaa9"),i=a("26e051b7"),o=a("38299514"),d=r._(o),l=a("7aab5c8a"),g=r._(l),n=a("872dc481"),u=r._(n),f=a("76b52bba"),m=t._(f),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},p=a("f53a241d"),h=r._(p),M=m.forwardRef(function(e,s){return m.createElement(h.default,(0,u.default)({},e,{ref:s,icon:c}));}),x=a("412e627e"),b=a("bddd5bec"),A=r._(b),w=a("ae74910a"),v=a("9df09342"),j=r._(v),y=a("13ed6381"),_=r._(y),P=a("e497e64f"),z=a("4f1e0f19"),q=a("b6af8abe"),S=r._(q),L=a("a8e90e34");let k=(0,P.createStyles)(({token:e})=>({action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:e.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:e.borderRadius,":hover":{backgroundColor:e.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}})),T=()=>{let{styles:e}=k();return(0,i.jsx)("div",{className:e.lang,"data-lang":!0,children:w.SelectLang&&(0,i.jsx)(w.SelectLang,{})});},F=({content:e})=>(0,i.jsx)(j.default,{style:{marginBottom:24},message:e,type:"error",showIcon:!0}),H=()=>{let[e,s]=(0,m.useState)(""),{styles:a}=k(),{message:r}=_.default.useApp(),t=(0,w.useIntl)(),o=async e=>{try{var a,i;if(e.password!==e.confirmPassword){s(t.formatMessage({id:"pages.register.error.passwordMismatch",defaultMessage:"\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"}));return;}let o=await L.API.post("/api/user/register",JSON.stringify({username:e.username,password:e.password,email:e.email}),{headers:{"Content-Type":"application/json"}});if((null===(a=o.data)||void 0===a?void 0:a.status)==="error"){s((null===(i=o.data)||void 0===i?void 0:i.message)||t.formatMessage({id:"pages.register.error.registerFailed",defaultMessage:"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}));return;}r.success(t.formatMessage({id:"pages.register.success",defaultMessage:"\u6CE8\u518C\u6210\u529F\uFF01"})),w.history.push("/login");}catch(e){console.log(e),e&&e.response&&e.response.data&&e.response.data.message?s(e.response.data.message):s(t.formatMessage({id:"pages.register.error.registerFailed",defaultMessage:"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}));}};return(0,i.jsxs)("div",{className:a.container,children:[(0,i.jsx)(w.Helmet,{children:(0,i.jsxs)("title",{children:[t.formatMessage({id:"pages.register.title",defaultMessage:"\u6CE8\u518C"})," - ",S.default.title]})}),(0,i.jsx)(T,{}),(0,i.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,i.jsxs)(x.LoginForm,{contentStyle:{minWidth:280,maxWidth:"75vw"},title:t.formatMessage({id:"pages.register.form.title",defaultMessage:"\u6CE8\u518C\u65B0\u8D26\u6237"}),subTitle:t.formatMessage({id:"pages.layouts.userLayout.title"}),submitter:{searchConfig:{submitText:t.formatMessage({id:"pages.register.submit",defaultMessage:"\u6CE8\u518C"})}},onFinish:async e=>{await o(e);},children:[e&&(0,i.jsx)(F,{content:e}),(0,i.jsx)(A.default,{name:"username",fieldProps:{size:"large",prefix:(0,i.jsx)(g.default,{})},placeholder:t.formatMessage({id:"pages.register.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:t.formatMessage({id:"pages.register.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"})},{min:4,message:t.formatMessage({id:"pages.register.username.min",defaultMessage:"\u7528\u6237\u540D\u81F3\u5C114\u4E2A\u5B57\u7B26"})}]}),(0,i.jsx)(A.default,{name:"email",fieldProps:{size:"large",prefix:(0,i.jsx)(M,{})},placeholder:t.formatMessage({id:"pages.register.email.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}),rules:[{required:!0,message:t.formatMessage({id:"pages.register.email.required",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01"})},{type:"email",message:t.formatMessage({id:"pages.register.email.invalid",defaultMessage:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740\uFF01"})}]}),(0,i.jsx)(A.default.Password,{name:"password",fieldProps:{size:"large",prefix:(0,i.jsx)(d.default,{})},placeholder:t.formatMessage({id:"pages.register.password.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:t.formatMessage({id:"pages.register.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{min:6,message:t.formatMessage({id:"pages.register.password.min",defaultMessage:"\u5BC6\u7801\u81F3\u5C116\u4E2A\u5B57\u7B26"})},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/,message:t.formatMessage({id:"pages.register.password.pattern",defaultMessage:"\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57"})}]}),(0,i.jsx)(A.default.Password,{name:"confirmPassword",fieldProps:{size:"large",prefix:(0,i.jsx)(d.default,{})},placeholder:t.formatMessage({id:"pages.register.confirmPassword.placeholder",defaultMessage:"\u8BF7\u786E\u8BA4\u5BC6\u7801"}),rules:[{required:!0,message:t.formatMessage({id:"pages.register.confirmPassword.required",defaultMessage:"\u8BF7\u786E\u8BA4\u5BC6\u7801\uFF01"})},{min:6,message:t.formatMessage({id:"pages.register.confirmPassword.min",defaultMessage:"\u5BC6\u7801\u81F3\u5C116\u4E2A\u5B57\u7B26"})}]})]})}),(0,i.jsx)(z.Footer,{})]});};},a8e90e34:function(e,s,a){"use strict";a.d(s,"__esModule",{value:!0}),a.d(s,"API",{enumerable:!0,get:function(){return d;}});var r=a("777fffbe")._(a("795f1363")),t=a("1fc97d93"),i=a("9a7ec01c"),o=a("23f8e02c");let d=r.default.create({baseURL:i.ENV.API_BASE_URL});d.interceptors.request.use(e=>{let s=(0,o.authHeader)();return e.headers&&"function"==typeof e.headers.set?s.Authorization&&e.headers.set("Authorization",s.Authorization):e.headers&&s.Authorization&&(e.headers.Authorization=s.Authorization),e;},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>((0,t.showError)(e),Promise.reject(e)));}}]);
//# sourceMappingURL=f56e5e2e-async.a84c7ebe.js.map