(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["10606fcf"],{a8e90e34:function(e,a,s){"use strict";s.d(a,"__esModule",{value:!0}),s.d(a,"API",{enumerable:!0,get:function(){return r;}});var t=s("777fffbe")._(s("795f1363")),d=s("1fc97d93"),i=s("9a7ec01c"),l=s("23f8e02c");let r=t.default.create({baseURL:i.ENV.API_BASE_URL});r.interceptors.request.use(e=>{let a=(0,l.authHeader)();return e.headers&&"function"==typeof e.headers.set?a.Authorization&&e.headers.set("Authorization",a.Authorization):e.headers&&a.Authorization&&(e.headers.Authorization=a.Authorization),e;},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>((0,d.showError)(e),Promise.reject(e)));},afae4207:function(e,a,s){"use strict";s.d(a,"__esModule",{value:!0}),s.d(a,"default",{enumerable:!0,get:function(){return M;}});var t=s("777fffbe"),d=s("26e051b7"),i=s("76b52bba"),l=s("e54bf6aa"),r=s("579ab426"),u=t._(s("2888ea24")),n=t._(s("6a64c6d6")),o=t._(s("1030b7d7")),f=t._(s("e27282e4")),g=t._(s("dc9ef55b")),m=t._(s("8f49028c")),p=s("9acd0375"),c=s("ae74910a"),M=()=>{let e=(0,c.useIntl)(),[a,s]=(0,i.useState)(!1),[t,M]=(0,i.useState)(Object),h=[{title:e.formatMessage({id:"pages.admin.user.id",defaultMessage:"ID"}),dataIndex:"id"},{title:e.formatMessage({id:"pages.admin.user.username",defaultMessage:"\u7528\u6237\u540D"}),dataIndex:"username"},{title:e.formatMessage({id:"pages.admin.user.email",defaultMessage:"\u90AE\u7BB1"}),dataIndex:"email",hideInSearch:!0},{disable:!0,title:e.formatMessage({id:"pages.admin.user.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",filters:!0,onFilter:!0,ellipsis:!0,valueType:"select",valueEnum:{3:{text:e.formatMessage({id:"pages.admin.user.status.all",defaultMessage:"\u6240\u6709"})},0:{text:e.formatMessage({id:"pages.admin.user.status.disabled",defaultMessage:"\u7981\u7528"}),status:"Error"},1:{text:e.formatMessage({id:"pages.admin.user.status.normal",defaultMessage:"\u6B63\u5E38"}),status:"Success"}}},{title:e.formatMessage({id:"pages.admin.user.quotaUsed",defaultMessage:"\u6BCF\u65E5\u5DF2\u4F7F\u7528\u989D\u5EA6"}),dataIndex:["profile","quotaUsed"],hideInSearch:!0},{title:e.formatMessage({id:"pages.admin.user.quotaTotal",defaultMessage:"\u6BCF\u65E5\u603B\u989D\u5EA6"}),dataIndex:["profile","quotaTotal"],hideInSearch:!0},{title:e.formatMessage({id:"pages.admin.user.createdAt",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:e.formatMessage({id:"pages.admin.user.createdAt",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createdAt",valueType:"dateRange",hideInTable:!0,search:{transform:e=>({startTime:e[0],endTime:e[1]})}},{title:e.formatMessage({id:"pages.admin.user.operations",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",key:"option",render:(a,t,i,l)=>[(0,d.jsx)("a",{onClick:()=>{s(!0),M(t);},children:e.formatMessage({id:"pages.admin.user.edit",defaultMessage:"\u7F16\u8F91"})},"editable"),(0,d.jsx)("a",{children:e.formatMessage({id:"pages.admin.user.detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}],b=(0,i.useRef)(),[x]=u.default.useForm(),[T,I]=(0,i.useState)(!1);return(0,d.jsxs)(l.PageContainer,{children:[a?(x.setFieldsValue(t),(0,d.jsx)(g.default,{open:a,title:e.formatMessage({id:"pages.admin.user.editModal.title",defaultMessage:"\u7F16\u8F91\u7528\u6237"}),onCancel:()=>{s(!1);},confirmLoading:T,onOk:async()=>{let a=x.getFieldsValue(),d={email:a.email,status:a.status,quotaUsed:a.profile.quotaUsed,quotaTotal:a.profile.quotaTotal};I(!0);try{await p.systemApi.editUser(t.id,d),I(!1),s(!1),f.default.info(e.formatMessage({id:"pages.admin.user.save.success",defaultMessage:"\u4FDD\u5B58\u6210\u529F"})),b.current.reload();}catch(s){var i,l;let a=(null==s?void 0:null===(l=s.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.message)||(null==s?void 0:s.message)||e.formatMessage({id:"pages.admin.user.save.failed",defaultMessage:"\u4FDD\u5B58\u5931\u8D25"});f.default.error(a);}finally{I(!1);}},children:(0,d.jsxs)(u.default,{labelCol:{span:6},wrapperCol:{span:14},layout:"horizontal",form:x,children:[(0,d.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.user.status.label",defaultMessage:"\u7528\u6237\u72B6\u6001"}),name:"status",children:(0,d.jsxs)(m.default,{style:{width:100},children:[(0,d.jsx)(m.default.Option,{value:0,children:e.formatMessage({id:"pages.admin.user.status.disable",defaultMessage:"\u7981\u7528"})},"0"),(0,d.jsx)(m.default.Option,{value:1,children:e.formatMessage({id:"pages.admin.user.status.enable",defaultMessage:"\u542F\u7528"})},"1")]})}),(0,d.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.user.quotaUsed.label",defaultMessage:"\u4ECA\u65E5\u5DF2\u4F7F\u7528\u989D\u5EA6"}),name:["profile","quotaUsed"],children:(0,d.jsx)(o.default,{disabled:!0,min:0,step:1,precision:0})}),(0,d.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.user.quotaTotal.label",defaultMessage:"\u6BCF\u65E5\u603B\u989D\u5EA6"}),name:["profile","quotaTotal"],children:(0,d.jsx)(o.default,{min:0,step:1,precision:0})}),(0,d.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.user.email.label",defaultMessage:"\u90AE\u7BB1"}),name:["email"],children:(0,d.jsx)(n.default,{type:"email"})})]})})):null,(0,d.jsx)(r.ProTable,{columns:h,actionRef:b,cardBordered:!0,request:async(e,a,s)=>p.systemApi.getUserList(e),rowKey:"id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:(e,a)=>"get"===a?{...e,createdAt:[e.startTime,e.endTime]}:e},pagination:{pageSize:5,onChange:e=>{}},dateFormatter:"string",headerTitle:e.formatMessage({id:"pages.admin.user.list.title",defaultMessage:"\u7528\u6237\u5217\u8868"}),toolBarRender:()=>[]})]});};}}]);
//# sourceMappingURL=10606fcf-async.73dbbbb8.js.map