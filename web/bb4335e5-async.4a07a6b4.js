(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["bb4335e5"],{"2f5c39f2":function(e,a,s){"use strict";s.d(a,"__esModule",{value:!0}),s.d(a,"default",{enumerable:!0,get:function(){return y;}});var l=s("777fffbe"),t=s("26e051b7"),d=s("76b52bba"),i=s("9acd0375"),r=l._(s("7e008f03")),n=l._(s("6a64c6d6")),o=l._(s("8f49028c")),u=l._(s("2888ea24")),m=l._(s("accfd539")),c=l._(s("9df09342")),f=l._(s("40e51ad9")),g=l._(s("7201bd80")),p=s("e54bf6aa"),h=l._(s("e27282e4")),M=s("ae74910a"),y=()=>{let e=(0,M.useIntl)(),[a]=u.default.useForm(),[s,l]=(0,d.useState)({selectedASR:"",selectedTTS:"",selectedLLM:"",selectedVLLLM:"",prompt:"",quickReplyWords:[],deleteAudio:!1,usePrivateConfig:!1}),[y,x]=(0,d.useState)({asr:[],tts:[],llm:[],vlllm:[]}),[v,j]=(0,d.useState)(!0),[b,L]=(0,d.useState)(!1),[k,R]=h.default.useMessage(),[A,S]=(0,d.useState)("");(0,d.useEffect)(()=>{_();},[]);let _=async()=>{try{j(!0);let e=await i.systemApi.getSystemConfig(),s=e&&e.data||{},t=s||{selectedASR:"",selectedTTS:"",selectedLLM:"",selectedVLLLM:"",prompt:"",quickReplyWords:[],deleteAudio:!1,usePrivateConfig:!1};l(t),a.setFieldsValue(t),x({asr:(s.asrList||[]).map(e=>({name:e,displayName:e})),tts:(s.ttsList||[]).map(e=>({name:e,displayName:e})),llm:(s.llmList||[]).map(e=>({name:e,displayName:e})),vlllm:(s.vllmList||[]).map(e=>({name:e,displayName:e}))});}catch(a){console.error("\u52A0\u8F7D\u914D\u7F6E\u5931\u8D25:",a),k.error(e.formatMessage({id:"pages.admin.settings.error.loadFailed",defaultMessage:"\u52A0\u8F7D\u914D\u7F6E\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5"})),x({asr:[],tts:[],llm:[],vlllm:[]});}finally{j(!1);}},T=async()=>{try{L(!0);let t={...s,...a.getFieldsValue()};await i.systemApi.saveSystemConfig(t),k.success(e.formatMessage({id:"pages.admin.settings.success.saved",defaultMessage:"\u914D\u7F6E\u4FDD\u5B58\u6210\u529F\uFF01"})),l(t);}catch(s){var t,d;console.error("\u4FDD\u5B58\u914D\u7F6E\u5931\u8D25:",s);let a=(null==s?void 0:null===(d=s.response)||void 0===d?void 0:null===(t=d.data)||void 0===t?void 0:t.message)||e.formatMessage({id:"pages.admin.settings.error.saveFailed",defaultMessage:"\u4FDD\u5B58\u914D\u7F6E\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"});k.error(a);}finally{L(!1);}},q=()=>{var e;if(A.trim()&&!(null===(e=s.quickReplyWords)||void 0===e?void 0:e.includes(A.trim()))){let e=[...s.quickReplyWords||[],A.trim()];l(a=>({...a,quickReplyWords:e})),a.setFieldValue("quickReplyWords",e),S("");}},C=e=>{let t=(s.quickReplyWords||[]).filter((a,s)=>s!==e);l(e=>({...e,quickReplyWords:t})),a.setFieldValue("quickReplyWords",t);};return v?(0,t.jsx)(p.PageContainer,{children:(0,t.jsx)(g.default,{children:(0,t.jsx)("div",{style:{textAlign:"center",padding:"32px"},children:(0,t.jsx)(f.default,{size:"large"})})})}):(0,t.jsxs)(p.PageContainer,{children:[R,(0,t.jsx)(g.default,{children:(0,t.jsx)(u.default,{form:a,layout:"vertical",onFinish:T,initialValues:s,children:(0,t.jsxs)(m.default,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.asr.label",defaultMessage:"ASR \u670D\u52A1"}),name:"selectedASR",children:(0,t.jsx)(o.default,{placeholder:e.formatMessage({id:"pages.admin.settings.asr.placeholder",defaultMessage:"\u9009\u62E9 ASR \u670D\u52A1"}),children:y.asr.map(e=>(0,t.jsx)(o.default.Option,{value:e.name,children:e.displayName||e.name},e.name))})}),(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.tts.label",defaultMessage:"TTS \u670D\u52A1"}),name:"selectedTTS",children:(0,t.jsx)(o.default,{placeholder:e.formatMessage({id:"pages.admin.settings.tts.placeholder",defaultMessage:"\u9009\u62E9 TTS \u670D\u52A1"}),children:y.tts.map(e=>(0,t.jsx)(o.default.Option,{value:e.name,children:e.displayName||e.name},e.name))})}),(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.llm.label",defaultMessage:"LLM \u670D\u52A1"}),name:"selectedLLM",children:(0,t.jsx)(o.default,{placeholder:e.formatMessage({id:"pages.admin.settings.llm.placeholder",defaultMessage:"\u9009\u62E9 LLM \u670D\u52A1"}),children:y.llm.map(e=>(0,t.jsx)(o.default.Option,{value:e.name,children:e.displayName||e.name},e.name))})}),(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.vlllm.label",defaultMessage:"VLLLM \u670D\u52A1"}),name:"selectedVLLLM",children:(0,t.jsx)(o.default,{placeholder:e.formatMessage({id:"pages.admin.settings.vlllm.placeholder",defaultMessage:"\u9009\u62E9 VLLLM \u670D\u52A1"}),children:y.vlllm.map(e=>(0,t.jsx)(o.default.Option,{value:e.name,children:e.displayName||e.name},e.name))})})]}),(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.prompt.label",defaultMessage:"\u63D0\u793A\u8BCD\u8BBE\u7F6E"}),name:"prompt",children:(0,t.jsx)(n.default.TextArea,{rows:10,placeholder:e.formatMessage({id:"pages.admin.settings.prompt.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u63D0\u793A\u8BCD..."})})}),(0,t.jsx)(u.default.Item,{label:e.formatMessage({id:"pages.admin.settings.quickReply.label",defaultMessage:"\u5FEB\u901F\u56DE\u590D\u8BCD"}),name:"quickReplyWords",children:(0,t.jsxs)(m.default,{direction:"vertical",style:{width:"100%"},children:[(0,t.jsx)(m.default,{wrap:!0,children:(s.quickReplyWords||[]).map((e,a)=>(0,t.jsx)(c.default,{message:e,type:"info",closable:!0,onClose:()=>C(a),style:{margin:0}},`${e}-${a}`))}),(0,t.jsxs)(m.default.Compact,{style:{width:"100%",maxWidth:500},children:[(0,t.jsx)(n.default,{value:A,onChange:e=>S(e.target.value),placeholder:e.formatMessage({id:"pages.admin.settings.quickReply.placeholder",defaultMessage:"\u8F93\u5165\u65B0\u7684\u5FEB\u901F\u56DE\u590D\u8BCD"}),onPressEnter:q}),(0,t.jsx)(r.default,{type:"primary",onClick:q,disabled:!A.trim(),children:e.formatMessage({id:"pages.admin.settings.quickReply.add",defaultMessage:"\u6DFB\u52A0"})})]})]})}),(0,t.jsx)(u.default.Item,{children:(0,t.jsxs)(m.default,{children:[(0,t.jsx)(r.default,{type:"primary",loading:b,onClick:T,children:b?e.formatMessage({id:"pages.admin.settings.saving",defaultMessage:"\u4FDD\u5B58\u4E2D..."}):e.formatMessage({id:"pages.admin.settings.save",defaultMessage:"\u4FDD\u5B58\u914D\u7F6E"})}),(0,t.jsx)(r.default,{onClick:()=>{a.resetFields(),_();},disabled:b,children:e.formatMessage({id:"pages.admin.settings.reset",defaultMessage:"\u91CD\u7F6E"})})]})})]})})})]});};},a8e90e34:function(e,a,s){"use strict";s.d(a,"__esModule",{value:!0}),s.d(a,"API",{enumerable:!0,get:function(){return r;}});var l=s("777fffbe")._(s("795f1363")),t=s("1fc97d93"),d=s("9a7ec01c"),i=s("23f8e02c");let r=l.default.create({baseURL:d.ENV.API_BASE_URL});r.interceptors.request.use(e=>{let a=(0,i.authHeader)();return e.headers&&"function"==typeof e.headers.set?a.Authorization&&e.headers.set("Authorization",a.Authorization):e.headers&&a.Authorization&&(e.headers.Authorization=a.Authorization),e;},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>((0,t.showError)(e),Promise.reject(e)));}}]);
//# sourceMappingURL=bb4335e5-async.4a07a6b4.js.map